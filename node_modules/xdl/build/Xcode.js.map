{"version":3,"file":"Xcode.js","sourceRoot":"","sources":["../src/Xcode.ts"],"names":[],"mappings":";;;AAAA,iDAAyC;AAEzC,yCAAoC;AAEpC,mCAAmC;AACtB,QAAA,cAAc,GAAG,GAAG,CAAC;AACrB,QAAA,UAAU,GAAG,WAAW,CAAC;AAEtC,IAAI,aAAa,GAA0B,KAAK,CAAC;AAEjD,SAAgB,eAAe;;IAC7B,uFAAuF;IACvF,wDAAwD;IACxD,IAAI,aAAa,KAAK,KAAK,EAAE;QAC3B,OAAO,aAAa,CAAC;KACtB;IACD,IAAI;QACF,MAAM,IAAI,GAAG,MAAA,wBAAQ,CAAC,qBAAqB,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,CAAC;aAC5D,QAAQ,EAAE;aACV,KAAK,CAAC,mBAAmB,CAAC,0CAAG,CAAC,CAAC,CAAC;QACnC,6BAA6B;QAC7B,IAAI,IAAI,EAAE;YACR,aAAa,GAAG,GAAG,IAAI,IAAI,CAAC;YAC5B,OAAO,aAAa,CAAC;SACtB;QACD,2BAA2B;QAC3B,iBAAM,CAAC,MAAM,CAAC,KAAK,CACjB,0FAA0F,CAC3F,CAAC;KACH;IAAC,MAAM;QACN,gBAAgB;KACjB;IACD,aAAa,GAAG,IAAI,CAAC;IACrB,OAAO,aAAa,CAAC;AACvB,CAAC;AAxBD,0CAwBC;AAED;;;;GAIG;AACH,SAAgB,YAAY,CAAC,KAAa;IACxC,MAAM,IAAI,GAAG,eAAe,CAAC,KAAK,CAAC,CAAC;IACpC,wBAAQ,CAAC,QAAQ,IAAI,EAAE,EAAE,EAAE,KAAK,EAAE,QAAQ,EAAE,CAAC,CAAC;AAChD,CAAC;AAHD,oCAGC;AAED,SAAS,eAAe,CAAC,KAAa;IACpC,IAAI,OAAO,CAAC,QAAQ,KAAK,QAAQ,EAAE;QACjC,2EAA2E;QAC3E,OAAO,wCAAwC,KAAK,EAAE,CAAC;KACxD;IACD,OAAO,mCAAmC,KAAK,EAAE,CAAC;AACpD,CAAC","sourcesContent":["import { execSync } from 'child_process';\n\nimport { Logger } from './internal';\n\n// Based on the RN docs (Aug 2020).\nexport const minimumVersion = 9.4;\nexport const appStoreId = '497799835';\n\nlet _xcodeVersion: string | null | false = false;\n\nexport function getXcodeVersion(): string | null {\n  // This method anywhere from 1-2s so cache the results in case we run it multiple times\n  // (like in run:ios or reopening on iOS for dev client).\n  if (_xcodeVersion !== false) {\n    return _xcodeVersion;\n  }\n  try {\n    const last = execSync('xcodebuild -version', { stdio: 'pipe' })\n      .toString()\n      .match(/^Xcode (\\d+\\.\\d+)/)?.[1];\n    // Convert to a semver string\n    if (last) {\n      _xcodeVersion = `${last}.0`;\n      return _xcodeVersion;\n    }\n    // not sure what's going on\n    Logger.global.error(\n      'Unable to check Xcode version. Command ran successfully but no version number was found.'\n    );\n  } catch {\n    // not installed\n  }\n  _xcodeVersion = null;\n  return _xcodeVersion;\n}\n\n/**\n * Open a link to the App Store. Just link in mobile apps, **never** redirect without prompting first.\n *\n * @param appId\n */\nexport function openAppStore(appId: string) {\n  const link = getAppStoreLink(appId);\n  execSync(`open ${link}`, { stdio: 'ignore' });\n}\n\nfunction getAppStoreLink(appId: string): string {\n  if (process.platform === 'darwin') {\n    // TODO: Is there ever a case where the macappstore isn't available on mac?\n    return `macappstore://itunes.apple.com/app/id${appId}`;\n  }\n  return `https://apps.apple.com/us/app/id${appId}`;\n}\n"]}